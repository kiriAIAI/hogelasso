@app.route('/product-details.html') def productdetails(): return render_template('product-details.html') @app.route('/submit_product-details', methods=['POST']) def submit_data(): # 获取JSON数据 data = request.get_json() my_account_id = data.get('my_account_id') username = data.get('username') title = data.get('title') price = data.get('price') # 连接数据库 conn = conn_db() cursor = conn.cursor() # 插入数据到数据库 sql = "INSERT INTO product_details (my_account_id, username, title, price) VALUES (%s, %s, %s, %s)" val = (my_account_id, username, title, price) cursor.execute(sql, val) conn.commit() # 关闭数据库连接 cursor.close() conn.close() # 打印数据（可选） print(f"アカウントID: {my_account_id}, ユーザー名: {username}, タイトル: {title}, 値段: {price}")

from flask import Flask, render_template, request, redirect, url_for
import mysql.connector

app = Flask(__name__)

# 数据库连接函数
def conn_db():
    conn = mysql.connector.connect(
        host="127.0.0.1", 
        user="root", 
        password="root", 
        db="your_database",  # 确保替换为实际的数据库名称
        charset='utf8'
    )
    return conn

@app.route('/product-details.html')
def productdetails():
    return render_template('product-details.html')

@app.route('/submit_product-details', methods=['POST'])
def submit_data():
    # 获取JSON数据
    data = request.get_json()
    my_account_id = data.get('my_account_id')
    username = data.get('username')
    title = data.get('title')
    price = data.get('price')

    # 连接数据库
    conn = conn_db()
    cursor = conn.cursor()

    # 插入数据到数据库
    sql = "INSERT INTO product_details (my_account_id, username, title, price) VALUES (%s, %s, %s, %s)"
    val = (my_account_id, username, title, price)
    cursor.execute(sql, val)
    conn.commit()

    # 关闭数据库连接
    cursor.close()
    conn.close()

    # 打印数据（可选）
    print(f"アカウントID: {my_account_id}, ユーザー名: {username}, タイトル: {title}, 値段: {price}")

    # 重定向到支付方式选择页面
    return redirect(url_for('payment'))

# 示例支付方法选择页面的路由
@app.route('/payment')
def payment():
    return "支払い方法選択ページ"

if __name__ == '__main__':
    app.run(debug=True)
