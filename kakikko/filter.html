<!DOCTYPE html>
<html data-wf-page="670cef3e259a9342338780a9" data-wf-site="670b6ec91824c1500bdac7a2">
<head>
  <meta charset="utf-8">
  <title>filter</title>
  <meta content="filter" property="og:title">
  <meta content="filter" property="twitter:title">
  <meta content="width=device-width, initial-scale=1" name="viewport">
  <meta content="Webflow" name="generator">
  <link href="{{ url_for('static', filename='css/normalize.css') }}" rel="stylesheet" type="text/css">
  <link href="{{ url_for('static', filename='css/webflow.css') }}" rel="stylesheet" type="text/css">
  <link href="{{ url_for('static', filename='css/kakikko2.webflow.css') }}" rel="stylesheet" type="text/css">
  <link href="{{ url_for('static', filename='css/tooltip.css') }}" rel="stylesheet" type="text/css">
  <script src="{{ url_for('static', filename='js/tooltip.js') }}" type="text/javascript" charset="UTF-8"></script>
  <style>@media (max-width:991px) and (min-width:768px) {html.w-mod-js:not(.w-mod-ix) [data-w-id="b3f7d3b3-9303-98f3-f9df-cba7615ffb62"] {-webkit-transform:translate3d(0, 120%, 0) scale3d(1, 1, 1) rotateX(0) rotateY(0) rotateZ(0) skew(0, 0);-moz-transform:translate3d(0, 120%, 0) scale3d(1, 1, 1) rotateX(0) rotateY(0) rotateZ(0) skew(0, 0);-ms-transform:translate3d(0, 120%, 0) scale3d(1, 1, 1) rotateX(0) rotateY(0) rotateZ(0) skew(0, 0);transform:translate3d(0, 120%, 0) scale3d(1, 1, 1) rotateX(0) rotateY(0) rotateZ(0) skew(0, 0);}}@media (max-width:767px) and (min-width:480px) {html.w-mod-js:not(.w-mod-ix) [data-w-id="b3f7d3b3-9303-98f3-f9df-cba7615ffb62"] {-webkit-transform:translate3d(0, 120%, 0) scale3d(1, 1, 1) rotateX(0) rotateY(0) rotateZ(0) skew(0, 0);-moz-transform:translate3d(0, 120%, 0) scale3d(1, 1, 1) rotateX(0) rotateY(0) rotateZ(0) skew(0, 0);-ms-transform:translate3d(0, 120%, 0) scale3d(1, 1, 1) rotateX(0) rotateY(0) rotateZ(0) skew(0, 0);transform:translate3d(0, 120%, 0) scale3d(1, 1, 1) rotateX(0) rotateY(0) rotateZ(0) skew(0, 0);}}@media (max-width:479px) {html.w-mod-js:not(.w-mod-ix) [data-w-id="b3f7d3b3-9303-98f3-f9df-cba7615ffb62"] {-webkit-transform:translate3d(0, 120%, 0) scale3d(1, 1, 1) rotateX(0) rotateY(0) rotateZ(0) skew(0, 0);-moz-transform:translate3d(0, 120%, 0) scale3d(1, 1, 1) rotateX(0) rotateY(0) rotateZ(0) skew(0, 0);-ms-transform:translate3d(0, 120%, 0) scale3d(1, 1, 1) rotateX(0) rotateY(0) rotateZ(0) skew(0, 0);transform:translate3d(0, 120%, 0) scale3d(1, 1, 1) rotateX(0) rotateY(0) rotateZ(0) skew(0, 0);}}</style>
  <link href="https://fonts.googleapis.com" rel="preconnect">
  <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" integrity="sha512-Kc323vGBEqzTmouAECnVceyQqyqdsSiqLQISBL29aUW4U/M7pSPA/gEUZQqv1cwx4OnYxTxve5UMg5GT6L4JJg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js" type="text/javascript"></script>
  <script type="text/javascript">WebFont.load({  google: {    families: ["Noto Sans JP:regular,500,600,700,900"]  }});</script>
  <script type="text/javascript">!function(o,c){var n=c.documentElement,t=" w-mod-";n.className+=t+"js",("ontouchstart"in o||o.DocumentTouch&&c instanceof DocumentTouch)&&(n.className+=t+"touch")}(window,document);</script>
  <link href="{{ url_for('static', filename='images/favicon.png') }}" rel="shortcut icon" type="image/x-icon">
  <link href="{{ url_for('static', filename='images/webclip.png') }}" rel="apple-touch-icon">
</head>
<body class="body">
  <div data-animation="default" data-collapse="medium" data-duration="400" data-easing="ease" data-easing2="ease" role="banner" class="navbar w-nav">
    <div class="navbar-container">
      <a href="{{ url_for('index') }}" aria-current="page" class="w-nav-brand w--current">
        <img loading="lazy" src="{{ url_for('static', filename='images/Logo.png') }}" alt="LOGO">
      </a>
      <div class="navbar-menu-wrapper">
        <nav role="navigation" class="nav-menu w-nav-menu">
          <div data-delay="0" data-hover="false" class="w-dropdown">
            <div class="dropdown-toggle w-dropdown-toggle">
              <div class="bell-icon">
                <img src="{{ url_for('static', filename='images/bell.svg') }}" loading="lazy" alt="" class="navbar-icon">
              </div>
            </div>
            <nav class="dropdown-list w-dropdown-list">
              <a href="{{ url_for('notification') }}" class="dropdown-link w-inline-block">
                {% if messages %}
                  <div>メッセージが届きました</div>
                {% else %}
                  <div>メッセージはありません</div>
                {% endif %}
              </a>
              <div class="notification-messages">
                {% for message in messages %}
                <div class="notification-item">
                  <div class="notification-avatar">
                    <img src="{{ url_for('static', filename='images/circle-user.svg') }}" alt="user avatar" class="notification-user">
                  </div>
                  <div class="notification-info">
                    <span class="notification-username">{{ message.sender_username }}</span>
                    <p class="notification-message">{{ message.message }}</p>
                    <span class="notification-time">{{ message.timestamp }}</span>
                  </div>
                </div>
                {% endfor %}
              </div>
            </nav>
          </div>
          <a href="{{ url_for('shoppingcart') }}" class="navbar-link shopping-cart w-nav-link"><img src="{{ url_for('static', filename='images/cart-shopping.svg') }}" loading="lazy" alt="" class="navbar-icon"></a>
          {% if 'login_id' in session %}
            <a href="{{ url_for('profile') }}" class="navbar-link w-nav-link">
              {% if user_info and user_info.profile_image %}
                <img src="{{ url_for('static', filename='images/profiles_images/' + user_info.profile_image) }}" loading="lazy" alt="" class="navbar-icon profile-icon">
              {% else %}
                <img src="{{ url_for('static', filename='images/circle-user.svg') }}" loading="lazy" alt="" class="navbar-icon">
              {% endif %}
            </a>
          {% else %}
            <a href="{{ url_for('login') }}" class="navbar-link w-nav-link">
              <img src="{{ url_for('static', filename='images/user-login.svg') }}" loading="lazy" alt="" class="navbar-icon">
            </a>
          {% endif %}
          <div class="back-icon">
            <i class="fa-solid fa-angles-left" id="backButton" onclick="goBack()"></i>
          </div>
        <script>
            function goBack() {
                window.history.back();
            }
        </script>
        
        </nav>
        <div class="menu-button w-nav-button">
          <div class="hamburger-menu w-icon-nav-menu"></div>
        </div>
      </div>
    </div>
  </div>
  <section class="hero-section">
    <div class="w-layout-blockcontainer hero-container w-container">
      <div class="sidenavbar">
        <div class="sindnavbar-header">
          <div class="sidenavbar-top">
            <a href="#" class="square is--hamburger w-inline-block">
              <img loading="lazy" src="{{ url_for('static', filename='images/hamburger.svg') }}" alt="" class="navbar__icon is--1">
              <img loading="lazy" src="{{ url_for('static', filename='images/x.svg') }}" alt="" class="navbar__icon is--2">
            </a>
          </div>
          <a href="{{ url_for('filter') }}" class="sidenavbar-search w-inline-block">
            <div class="square is--search"><img loading="lazy" src="{{ url_for('static', filename='images/search.svg') }}" alt="" class="navbar__icon is--search"></div>
            <div class="hide-text">
              <p class="sidenavbar-paragraph">検索</p>
            </div>
          </a>
          <div class="square is--line"></div>
        </div>
        <div class="nav__links">
          <a href="{{ url_for('index') }}" aria-current="page" class="sidenavbar-link w-inline-block w--current" id="home">
            <div class="square is--link"><img loading="lazy" src="{{ url_for('static', filename='images/home.svg') }}" alt="" class="sidenavbar-icon"></div>
            <div class="hide-text is--nav">
              <p class="sidenavbar-paragraph">ホーム</p>
            </div>
          </a>
          <a href="{{ url_for('create') }}" class="sidenavbar-link w-inline-block" id="sakusei">
            <div class="square is--link"><img loading="lazy" src="{{ url_for('static', filename='images/plus.svg') }}" alt="" class="sidenavbar-icon"></div>
            <div class="hide-text is--nav">
              <p class="sidenavbar-paragraph">作成</p>
            </div>
          </a>
          <a href="{{ url_for('chatroom') }}" class="sidenavbar-link w-inline-block" id="chat">
            <div class="square is--link"><img loading="lazy" src="{{ url_for('static', filename='images/chat.svg') }}" alt="" class="sidenavbar-icon"></div>
            <div class="hide-text is--nav">
              <p class="sidenavbar-paragraph">チャット</p>
            </div>
          </a>
          <a href="{{ url_for('purchase_history') }}" class="sidenavbar-link w-inline-block" id="rireki">
            <div class="square is--link"><img loading="lazy" src="{{ url_for('static', filename='images/history.svg') }}" alt="" class="sidenavbar-icon"></div>
            <div class="hide-text is--nav">
              <p class="sidenavbar-paragraph">購入履歴</p>
            </div>
          </a>
          <a href="{{ url_for('profile') }}" class="sidenavbar-link w-inline-block" id="profile">
            <div class="square is--link"><img loading="lazy" src="{{ url_for('static', filename='images/user.svg') }}" alt="" class="sidenavbar-icon"></div>
            <div class="hide-text is--nav">
              <p class="sidenavbar-paragraph">プロフィール</p>
            </div>
          </a>
        </div>
        <div class="nav__footer">
          <a href="{{ url_for('confirmlogout') }}" class="sidenavbar-link w-inline-block" id="logout">
            <div class="square is--link"><img loading="lazy" src="{{ url_for('static', filename='images/logout.svg') }}" alt="" class="sidenavbar-icon"></div>
            <div class="hide-text is--nav">
              <p class="sidenavbar-paragraph">ログアウト</p>
            </div>
          </a>
        </div>
      </div>
      <div class="filter-block">
        <div id="w-node-b3f7d3b3-9303-98f3-f9df-cba7615ffb62-338780a9" data-w-id="b3f7d3b3-9303-98f3-f9df-cba7615ffb62" class="filter-left-block">
          <form action="{{ url_for('search') }}" class="search search-desktop w-form">
            <div class="search-form">
              <img loading="lazy" src="{{ url_for('static', filename='images/search-normal.svg') }}" alt="" class="filter-search-image">
              <input class="search-placehoder w-input" 
                     maxlength="256" 
                     name="query" 
                     placeholder="検索" 
                     type="search" 
                     id="search" 
                     autocomplete="off"
                     required="">
            </div>
            <input type="submit" class="hide w-button" value="Search">
            <div id="search-suggestions" class="search-suggestions"></div>
          </form>
          <div class="filter-form-block w-form">
            <form id="wf-form-Filter-2" name="wf-form-Filter-2" method="get" action="{{ url_for('filter') }}" class="filter-form">
              <!-- カテゴリー-->
              <div class="filter-category-list">
                <div class="filter-heading">
                  <div class="text-size-medium text-weight-semibold"><strong>カテゴリ</strong></div>
                  <a href="#" class="button is-link w-inline-block clear-filter" data-filter="category">
                    <div>クリア</div>
                  </a>
                </div>
                <div class="filter-category-wrapper">
                  <div class="filters2_list">
                    {% for category in ['literature', 'social', 'history', 'business', 'science', 'medical', 'certification', 'it', 'design', 'hobby', 'sports', 'lifestyle'] %}
                    <div class="filters2_item">
                        <label class="w-checkbox filters2_form-checkbox1">
                            <input type="checkbox" name="category" value="{{ category }}" 
                                   class="filter-checkbox" 
                                   {% if category in filters.category %}checked{% endif %}>
                            <span class="filters2_form-checkbox1-label">{{ category_names.get(category, category) }}</span>
                        </label>
                    </div>
                    {% endfor %}
                  </div>
                </div>
              </div>
            
              <!-- 価格 -->
              <div class="filter-price-list">
                <div class="filter-heading">
                  <div class="text-size-medium text-weight-semibold"><strong>値段</strong></div>
                  <a href="#" class="button is-link w-inline-block clear-filter" data-filter="price">
                    <div>クリア</div>
                  </a>
                </div>
                <div class="filter-category-wrapper">
                  <div class="filters2_list">
                    {% for price in ['1000', '3000', '5000', '7000', '10000'] %}
                    <div class="filters2_item">
                        <label class="w-checkbox filters2_form-checkbox1">
                            <input type="checkbox" name="price" value="{{ price }}" 
                                   class="filter-checkbox"
                                   {% if price in filters.price %}checked{% endif %}>
                            <span class="filters2_form-checkbox1-label">{{ price }}円以下</span>
                        </label>
                    </div>
                    {% endfor %}
                  </div>
                </div>
              </div>
            
              <!-- 送信ボタン -->
              <div class="filters2_tablet-modal-menu">
                <a href="#" class="button is-link w-inline-block clear-all-filters">
                  <div>すべてクリア</div>
                </a>
                <input type="submit" class="button w-button" value="適用">
              </div>
            </form>
          </div>
          <a data-w-id="b3f7d3b3-9303-98f3-f9df-cba7615ffc6c" href="#" class="filters2_tablet-modal-close-button w-inline-block">
            <img alt="" src="{{ url_for('static', filename='images/icon_close-modal.svg') }}" class="icon-1x1-small"></a>
        </div>
        <a data-w-id="b3f7d3b3-9303-98f3-f9df-cba7615ffc6e" href="#" class="filter-tablat-btn w-inline-block">
          <img loading="lazy" src="{{ url_for('static', filename='images/icon-filters.svg') }}" alt="" class="button-icon-left">
          <div class="text-block-2"><br></div>
        </a>
        <div id="w-node-b3f7d3b3-9303-98f3-f9df-cba7615ffc72-338780a9" class="filter-right-block">
          <div class="filters2_feed-header">
            <div class="filters2_tags-wrapper">
            </div>
            <div data-delay="200" data-hover="false" data-w-id="b3f7d3b3-9303-98f3-f9df-cba7615ffc79" class="dropdown1_component w-dropdown">
              <div class="dropdown1_toggle w-dropdown-toggle">
                <div>並べ替え</div>
                <div class="dropdown-chevron w-embed"><svg width=" 100%" height=" 100%" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" clip-rule="evenodd" d="M2.55806 6.29544C2.46043 6.19781 2.46043 6.03952 2.55806 5.94189L3.44195 5.058C3.53958 4.96037 3.69787 4.96037 3.7955 5.058L8.00001 9.26251L12.2045 5.058C12.3021 4.96037 12.4604 4.96037 12.5581 5.058L13.4419 5.94189C13.5396 6.03952 13.5396 6.19781 13.4419 6.29544L8.17678 11.5606C8.07915 11.6582 7.92086 11.6582 7.82323 11.5606L2.55806 6.29544Z" fill="currentColor"></path>
                  </svg></div>
              </div>
              <nav class="dropdown1_dropdown-list is-right w-dropdown-list">
                <a href="#" fs-cmssort-field="popularity" class="dropdown1_dropdown-link w-dropdown-link">人気順</a>
                <a href="#" fs-cmssort-field="newest" class="dropdown1_dropdown-link w-dropdown-link">新着順</a>
                <a href="#" fs-cmssort-field="price-asc" class="dropdown1_dropdown-link w-dropdown-link">価格が安い順</a>
                <a href="#" fs-cmssort-field="price-desc" class="dropdown1_dropdown-link w-dropdown-link">価格が高い順</a>
              </nav>
            </div>
          </div>
          <div class="w-layout-grid product-grid filter">
            {% if books %}
                {% for book in books %}
                <a href="{{ url_for('product_details', book_id=book.book_id) }}" class="product-card w-inline-block">
                    <div class="product-image-wrapper">
                        <img src="{{ url_for('static', filename='images/users_images/' + book.book_cover_image) }}" loading="lazy" alt="" class="product-image">
                    </div>
                    <div class="product-content-wrapper">
                        <h3 class="product-title">{{ book.book_title | safe }}</h3>
                        <div class="product-price"><strong>¥</strong> {{ book.book_price }}</div>
                        <div class="product-author">{{ book.owner_name }}</div>
                    </div>
                </a>
                {% endfor %}
            {% else %}
                <div class="no-products-message">
                    <p>商品が見つかりません</p>
                </div>
            {% endif %}
          </div>
        </div>
      </div>
    </div>
  </section>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const dropdown = document.querySelector('.dropdown1_component');
      const dropdownToggle = dropdown.querySelector('.dropdown1_toggle');
      const dropdownList = dropdown.querySelector('.dropdown1_dropdown-list');
      const sortLinks = document.querySelectorAll('.dropdown1_dropdown-link');
  
      // トグルボタンのクリックイベント
      dropdownToggle.addEventListener('click', function(e) {
          e.preventDefault();
          dropdownList.classList.toggle('w--open');
      });
  
      // ソートリンクのクリックイベント
      sortLinks.forEach(link => {
          link.addEventListener('click', function(e) {
              e.preventDefault();
              
              // 現在のURLパラメータを取得
              const urlParams = new URLSearchParams(window.location.search);
              
              // ソートオプションを設定
              const sortValue = this.getAttribute('data-sort');
              urlParams.set('sort', sortValue);
              
              // 現在のフィルターを保持
              const categories = document.querySelectorAll('input[name="category"]:checked');
              const prices = document.querySelectorAll('input[name="price"]:checked');
              
              // 既存のパラメータをクリア
              urlParams.delete('category');
              urlParams.delete('price');
              
              // 選択されたカテゴリーを追加
              categories.forEach(category => {
                  urlParams.append('category', category.value);
              });
              
              // 選択された価格を追加
              prices.forEach(price => {
                  urlParams.append('price', price.value);
              });
              
              // 新しいURLに遷移
              window.location.href = `${window.location.pathname}?${urlParams.toString()}`;
          });
      });
  
      // 外部クリックでドロップダウンを閉じる
      document.addEventListener('click', function(e) {
          if (!dropdown.contains(e.target)) {
              dropdownList.classList.remove('w--open');
          }
      });
    });
  </script>

  <script src="https://d3e54v103j8qbb.cloudfront.net/js/jquery-3.5.1.min.dc5e7f18c8.js?site=670b6ec91824c1500bdac7a2" type="text/javascript" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
  <script src="{{ url_for('static', filename='js/webflow.js') }}" type="text/javascript"></script>
  <script src="{{ url_for('static', filename='js/filter.js') }}" type="text/javascript"></script>
  <script src="{{ url_for('static', filename='js/search.js') }}" type="text/javascript"></script>
</body>
</html>